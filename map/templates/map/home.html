{% extends "base.html" %}

{% block title %}
Home page
{% endblock title %}
{% load static %}
{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'map/home.css' %}">
{% endblock style %}

{% block content %}
<h1>Home Page</h1>
<h2> Sample Webpage</h2>
<div>
    <button id="source">Source</button>
    <button id="destination">Destination</button>
    <button id="estimate">Estimate</button>
</div>

<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
    <g>
     <title>Layer 1</title>
     <ellipse ry="19.5" rx="21.5" id="svg_1" cy="119.5" cx="60.5" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <ellipse ry="22" rx="25.5" id="svg_2" cy="237" cx="68.5" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <ellipse ry="22.5" rx="29" id="svg_3" cy="393.5" cx="90" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_4" y2="216" x2="66" y1="140" x1="63" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_6" y2="373" x2="85" y1="259" x1="71" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_7" y2="254" x2="235" y1="254" x1="235" opacity="0.5" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="27.5" rx="31.5" id="svg_8" cy="446.5" cx="255.5" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <ellipse ry="18" rx="19" id="svg_9" cy="320" cx="237" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_10" y2="444" x2="227" y1="408" x1="115" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_11" y2="338" x2="238" y1="421" x1="250" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_12" y2="239" x2="100" y1="309" x1="223" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="21" rx="22" id="svg_13" cy="111" cx="225" stroke-width="1.5" stroke="#000" fill="#fff"/>
     <line stroke="#000" stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_14" y2="128" x2="229" y1="303" x1="240" stroke-width="1.5" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_15" y2="105" x2="204" y1="114" x1="81" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="17" rx="19" id="svg_16" cy="117" cx="369" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/ >
     </ellipse >
     <ellipse ry="18" rx="19" id="svg_17" cy="207" cx="366" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_18" y2="134" x2="371" y1="193" x1="371" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_19" y2="115" x2="249" y1="117" x1="349" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_20" y2="221" x2="352" y1="309" x1="252" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="undefined" stroke-linejoin="undefined" id="svg_21" y2="322" x2="370" y1="325" x1="254" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse stroke="#000" ry="21.5" rx="21" id="svg_22" cy="319.5" cx="393" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_23" y2="225" x2="374" y1="300" x1="388" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_24" y2="489" x2="379" y1="454" x1="284" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse stroke="#000" ry="31.5" rx="33" id="svg_25" cy="497.5" cx="412" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_26" y2="340" x2="395" y1="467" x1="409" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="34" rx="33.5" id="svg_28" cy="326" cx="565.5" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_29" y2="294" x2="561" y1="125" x1="388" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke="#000" stroke-linecap="null" stroke-linejoin="null" id="svg_30" y2="478" x2="436" y1="355" x1="551" opacity="0.5" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="none"/>
     <ellipse ry="17" rx="15.5" id="svg_31" cy="320" cx="471.5" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_32" y2="317" x2="456" y1="317" x1="414" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_33" y2="322" x2="534" y1="319" x1="488" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="21" rx="26.5" id="svg_35" cy="510" cx="712.5" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="23" rx="26.5" id="svg_36" cy="223" cx="721.5" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <ellipse ry="23" rx="23" id="svg_37" cy="118" cx="584" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_38" y2="509" x2="686" y1="497" x1="445" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_39" y2="245" x2="730" y1="489" x1="723" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_40" y2="129" x2="606" y1="207" x1="705" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
     <line stroke-linecap="null" stroke-linejoin="null" id="svg_41" y2="110" x2="388" y1="105" x1="566" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
    </g>
   
   </svg>
{% endblock content %}

{% block javascript %}
<script>
        var arr = ["svg_1", "svg_2", "svg_3", "svg_9", "svg_8", "svg_13", "svg_16", "svg_17", "svg_22", "svg_25", "svg_31", "svg_28", "svg_37", "svg_36", "svg_35"];
        for(var i in arr){
            a = document.getElementById(arr[i]);
            a.style.fill = "white";
        }
    $("document").ready(function(){
        var send = {};
        $("#source").click(function(){
            const arr = ["#svg_1", "#svg_2", "#svg_3", "#svg_9", "#svg_8", "#svg_13", "#svg_16", "#svg_17", "#svg_22", "#svg_25", "#svg_31", "#svg_28", "#svg_37", "#svg_36", "#svg_35"];

            for(var i in arr){
                $(arr[i]).click(function(){
                    send['source'] = this.id;
                    this.style.fill = "red";
                    for(var j in arr){
                        $(arr[j]).unbind();
                    }
                })
            }
        });

        $("#destination").click(function(){
            var arr = ["#svg_1", "#svg_2", "#svg_3", "#svg_9", "#svg_8", "#svg_13", "#svg_16", "#svg_17", "#svg_22", "#svg_25", "#svg_31", "#svg_28", "#svg_37", "#svg_36", "#svg_35"];
            for(var i in arr){
                $(arr[i]).click(function(){
                    send['destination'] = this.id;
                    this.style.fill = "blue";
                    console.log(send);
                    for(var j in arr){
                        $(arr[j]).unbind();
                    }
                })
            }
        });

        $("#estimate").click(function(){
            $.ajax({
                type : 'GET',
                url : "{% url 'get_it' %}",
                data : send,
                success : function(response){
                    console.log(typeof(response));
                    console.log(response);
                    console.log(response['distance']);
                    console.log(response['path']);
                    for(var i in response['path']){
                        response['path'][i] = "#" + response['path'][i];
                        console.log(response['path'][i]);
                        $(response['path'][i]).css("stroke", "red");
                    }
                }
            })
        });
    });
</script>
{% endblock javascript %}